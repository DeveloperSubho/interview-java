**What is Maven?**  
Maven is a powerful project management tool that is based on POM (project object model), used for projects build, dependency and documentation. It is a tool that can be used for building and managing any Java-based project. Maven makes the day-to-day work of Java developers easier and helps with the building and running of any Java-based project.

Maven Lifecycle: Below is a representation of the default Maven lifecycle and its 8 steps: Validate, Compile, Test, Package, Integration test, Verify, Install and Deploy.

![Maven Life Cycle](/Screenshots/Maven-Life-Cycle-1.jpg)

**_Maven Build Lifecycle_**  
The Maven build follows a specific life cycle to deploy and distribute the target project.

There are three built-in life cycles:

default: the main life cycle as it's responsible for project deployment
clean: to clean the project and remove all files generated by the previous build
site: to create the project's site documentation
Each life cycle consists of a sequence of phases. The default build life cycle consists of 23 phases as it's the main build lifecycle.

On the other hand, clean life cycle consists of 3 phases, while the site lifecycle is made up of 4 phases.

A Maven phase represents a stage in the Maven build lifecycle. Each phase is responsible for a specific task.

Here are some of the most important phases in the default build lifecycle:

* validate: check if all information necessary for the build is available
* compile: compile the source code
* test-compile: compile the test source code
* test: run unit tests
* package: package compiled source code into the distributable format (jar, war, …)
* integration-test: process and deploy the package if needed to run integration tests
* install: install the package to a local repository
* deploy: copy the package to the remote repository

Phases are executed in a specific order. This means that if we run a specific phase using the command:

**mvn <PHASE>**
This won't only execute the specified phase but all the preceding phases as well.

For example, if we run the deploy phase – which is the last phase in the default build lifecycle – that will execute all phases before the deploy phase as well, which is the entire default lifecycle:

**mvn deploy**

![Maven Life Cycle](/Screenshots/Maven-Life-Cycle-2.png)
![Maven Life Cycle](/Screenshots/Maven-Life-Cycle-3.png)

The default Maven lifecycle consists of 8 major steps or phases for compiling, testing, building and installing a given Java project as specified below:

1. Validate: This step validates if the project structure is correct. For example – It checks if all the dependencies have been downloaded and are available in the local repository.
2. Compile: It compiles the source code, converts the .java files to .class and stores the classes in target/classes folder.
3. Test: It runs unit tests for the project.
4. Package: This step packages the compiled code in distributable format like JAR or WAR.
5. Integration test: It runs the integration tests for the project.
6. Verify: This step runs checks to verify that the project is valid and meets the quality standards.
7. Install: This step installs the packaged code to the local Maven repository.
8. Deploy: It copies the packaged code to the remote repository for sharing it with other developers.

Maven follows a sequential order to execute the commands where if you run step n, all steps preceding it (Step 1 to n-1) are also executed. For example – if we run the Installation step (Step 7), it will validate, compile, package and verify the project along with running unit and integration tests (Step 1 to 6) before installing the built package to the local repository.

Maven Goal
Each phase is a sequence of goals, and each goal is responsible for a specific task.

When we run a phase – all goals bound to this phase are executed in order.

Here are some of the phases and default goals bound to them:

* compiler:compile – the compile goal from the compiler plugin is bound to the compile phase
* compiler:testCompile is bound to the test-compile phase
* surefire:test is bound to test phase
* install:install is bound to install phase
* jar:jar and war:war is bound to package phase

We can list all goals bound to a specific phase and their plugins using the command:

* mvn help:describe -Dcmd=PHASENAME
For example, to list all goals bound to the compile phase, we can run:

* mvn help:describe -Dcmd=compile
And get the sample output:

compile' is a phase corresponding to this plugin:
org.apache.maven.plugins:maven-compiler-plugin:3.1:compile
Which, as mentioned above, means the compile goal from compiler plugin is bound to the compile phase.

**Maven Plugin**
A Maven plugin is a group of goals. However, these goals aren't necessarily all bound to the same phase.

For example, here's a simple configuration of the Maven Failsafe plugin which is responsible for running integration tests:
```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-failsafe-plugin</artifactId>
            <version>${maven.failsafe.version}</version>
            <executions>
                <execution>
                    <goals>
                        <goal>integration-test</goal>
                        <goal>verify</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
```
As we can see, the Failsafe plugin has two main goals configured here:

* integration-test: run integration tests
* verify: verify all integration tests passed

We can use the following command to list all goals in a specific plugin:

**mvn <PLUGIN>:help**
For example, to list all goals in the Failsafe plugin:

**mvn failsafe:help**
And the output of this will be:

This plugin has 3 goals:

**failsafe:help**
Display help information on maven-failsafe-plugin.
Call mvn failsafe:help -Ddetail=true -Dgoal=<goal-name> to display parameter
details.

**failsafe:integration-test**
Run integration tests using Surefire.

**failsafe:verify**
Verify integration tests ran using Surefire.
To run a specific goal, without executing its entire phase (and the preceding phases) we can use the command:

**mvn <PLUGIN>:<GOAL>**
For example, to run integration-test goal from Failsafe plugin, we need to run:

**mvn failsafe:integration-test**

Building a Maven Project
To build a Maven project, we need to execute one of the life cycles by running one of their phases:

**mvn deploy**
This will execute the entire default lifecycle. Alternatively, we can stop at the install phase:

**mvn install**
But usually we'll use the command:

**mvn clean install**
To clean the project first – by running the clean lifecycle – before the new build.

We can also run only a specific goal of the plugin:

**mvn compiler:compile**
Note that if we tried to build a Maven project without specifying a phase or a goal, that will cause the error:

[ERROR] No goals have been specified for this build. You must specify a valid lifecycle phase or a goal

_Maven Commands:_

* mvn clean: Cleans the project and removes all files generated by the previous build.
* mvn compile: Compiles source code of the project.
* mvn test-compile: Compiles the test source code.
* mvn test: Runs tests for the project.
* mvn package: Creates JAR or WAR file for the project to convert it into a distributable format.
* mvn install: Deploys the packaged JAR/ WAR file to the local repository.
* mvn deploy: Copies the packaged JAR/ WAR file to the remote repository after compiling, running tests and building the project.

Generally when we run any of the above commands, we add the mvn clean step so that the target folder generated from the previous build is removed before running a newer build. This is how the command would look on integrating the clean step with install phase: mvn clean install

Similarly, if we want to run the step in debug mode for more detailed build information and logs, we will add -X to the actual command. Hence, the install step with debug mode on will have the following command: mvn -X install

Consider a scenario where we do not want to run the tests while packaging or installing the Java project. In this case, we use -DskipTests along with the actual command. If we need to run the install step by skipping the tests associated with the project, the command would be: mvn install -DskipTests
